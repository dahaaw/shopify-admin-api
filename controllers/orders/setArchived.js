const services = require( '../../services' );

module.exports = async ( req, res ) => {
    const arr_products_names = [
        "000000022",
        "000000023",
        "000000024",
        "000000026",
        "000000027",
        "000000028",
        "000000029",
        "000000029-1",
        "000000031",
        "000000034",
        "000000035-1",
        "000000036-3",
        "000000043",
        "000000044",
        "000000066",
        "000000067",
        "000000068",
        "000000069",
        "000000070",
        "000000072",
        "000000073",
        "000000074",
        "000000077",
        "000000084",
        "000000163",
        "000000178",
        "000000193",
        "000000211",
        "000000213",
        "000000214",
        "000000218",
        "000000235",
        "000000279",
        "000000300",
        "000000306",
        "000000369",
        "000000370",
        "000000424",
        "000000467",
        "000000471",
        "000000476",
        "000000482",
        "000000486",
        "000000543",
        "000000553",
        "000000686",
        "000000698",
        "000000793",
        "000000809",
        "000000810",
        "000000811",
        "000000812",
        "000000859",
        "000000872",
        "000000893",
        "000000900",
        "000000907",
        "000000914",
        "000000918",
        "000000925",
        "000000926",
        "000000990",
        "000000998",
        "000001093",
        "000001102",
        "000001134",
        "000001144",
        "000001145",
        "000001148",
        "000001149",
        "000001158",
        "000001196",
        "000001209",
        "000001264",
        "000001290",
        "000001305",
        "000001365",
        "000001424",
        "000001495",
        "000001504",
        "000001505",
        "000001506",
        "000001511",
        "000001513",
        "000001520",
        "000001570",
        "000001597",
        "000001608",
        "000001728",
        "000001743",
        "000001754",
        "000001808",
        "000001825",
        "000001831",
        "000001833",
        "000001889",
        "000001928",
        "000001964",
        "000001993",
        "000002046",
        "000002088",
        "000002089",
        "000002091",
        "000002111",
        "000002141",
        "000002146",
        "000002161",
        "000002180",
        "000002189",
        "000002207",
        "000002209",
        "000002210",
        "000002260",
        "000002269",
        "000002270",
        "000002273",
        "000002275",
        "000002293",
        "000002367",
        "000002372",
        "000002418",
        "000002421",
        "000002429",
        "000002430",
        "000002440",
        "000002457",
        "000002460",
        "000002471",
        "000002487",
        "000002493",
        "000002495",
        "000002498",
        "000002507",
        "000002526",
        "000002528",
        "000002529",
        "000002567",
        "000002575",
        "000002600",
        "000002631",
        "000002644",
        "000002673",
        "000002695",
        "000002783",
        "000002794",
        "000002818",
        "000002827",
        "000002836",
        "000002840",
        "000002845",
        "000002868",
        "000002869",
        "000002886",
        "000002889",
        "000002957",
        "000002999",
        "000003018",
        "000003020",
        "000003037",
        "000003057",
        "000003109",
        "000003149",
        "000003171",
        "000003218",
        "000003227",
        "000003242",
        "000003280",
        "000003328",
        "000003377",
        "000003379",
        "000003380",
        "000003381",
        "000003403",
        "000003550",
        "000003563",
        "000003664",
        "000003719",
        "000003796",
        "000003841",
        "000003873",
        "000003879",
        "000004024",
        "000004036",
        "000004126",
        "000004149",
        "000004184",
        "000004188",
        "000004215",
        "000004353",
        "000004410",
        "000004441",
        "000004443",
        "000004474",
        "000004559",
        "000004563",
        "000004582",
        "000004603",
        "000004604",
        "000004615",
        "000004630",
        "000004742",
        "000004750",
        "000004792",
        "000004809",
        "000004827",
        "000004848",
        "000004883",
        "000004898",
        "000004975",
        "000004983",
        "000004995",
        "000005001",
        "000005044",
        "000005053",
        "000005062",
        "000005143",
        "000005220",
        "000005345",
        "000005361",
        "000005367",
        "000005429",
        "000005454",
        "000005456",
        "000005457",
        "000005458",
        "000005460",
        "000005463",
        "000005543",
        "000005574",
        "000005637",
        "000005690",
        "000005691",
        "000005696",
        "000005726",
        "000005729",
        "000005739",
        "000005745",
        "000005805",
        "000005895",
        "000005908",
        "000005925",
        "000005940",
        "000006024",
        "000006113",
        "000006254",
        "000006275",
        "000006409",
        "000006437",
        "000006495",
        "000006659",
        "000006683",
        "000006763",
        "000006814",
        "000006880",
        "000006915",
        "000006925",
        "000006933",
        "000006937",
        "000006944",
        "000006957",
        "000007005",
        "000007020",
        "000007101",
        "000007162",
        "000007237",
        "000007258",
        "000007443",
        "000007451",
        "000007459",
        "000007510",
        "000007534",
        "000007545",
        "000007546",
        "000007588",
        "000007607",
        "000007672",
        "000007707",
        "000007718",
        "000007732",
        "000007742",
        "000007784",
        "000007824",
        "000007862",
        "000007869",
        "000007870",
        "000007962",
        "000007967",
        "000008028",
        "000008111",
        "000008158",
        "000008161",
        "000008209",
        "000008219",
        "000008226",
        "000008235",
        "000008239",
        "000008245",
        "000008248",
        "000008259",
        "000008263",
        "000008280",
        "000008327",
        "000008330",
        "000008335",
        "000008351",
        "000008359",
        "000008423",
        "000008441",
        "000008486",
        "000008526",
        "000008587",
        "000008605",
        "000008614",
        "000008618",
        "000008619",
        "000008696",
        "000008810",
        "000008816",
        "000008837",
        "000008909",
        "000008911",
        "000008985",
        "000009010",
        "000009035",
        "000009045",
        "000009049",
        "000009066",
        "000009067",
        "000009079",
        "000009089",
        "000009108",
        "000009192",
        "000009193",
        "000009215",
        "000009288",
        "000009291",
        "000009409",
        "000009444",
        "000009520",
        "000009523",
        "000009525",
        "000009548",
        "000009649",
        "000009651",
        "000009685",
        "000009722",
        "000009752",
        "000009816",
        "000009882",
        "000009886",
        "000009905",
        "000009948",
        "000009978",
        "000009984",
        "000010003",
        "000010006",
        "000010018",
        "000010076",
        "000010092",
        "000010176",
        "000010188",
        "000010240",
        "000010319",
        "000010342",
        "000010344",
        "000010406",
        "000010415",
        "000010492",
        "000010542",
        "000010543",
        "000010572",
        "000010579",
        "000010580",
        "000010600",
        "000010718",
        "000010764",
        "000010841",
        "000010892",
        "000010898",
        "000010985",
        "000010988",
        "000011004",
        "000011065",
        "000011073",
        "000011078",
        "000011081",
        "000011184",
        "000011221",
        "000011640",
    ];

    let logText = `// Set Orders to Archived
    `;

    for (const product_name of arr_products_names) {
        let arr_orders = await services.product.getByName( product_name );
        arr_orders = await arr_orders.json();
        if( arr_orders.orders?.length ){
            const order_detail = arr_orders.orders[0];

            // let archived = await services.order.setArchived( order_detail.id );
            // let archived = await services.order.setCancelled( order_detail.id );
            let archived = "";
            archived = await archived.json();
            if ( archived.order?.id ){
                logText += `// ${ product_name } ok
                `;    
            }else{
                logText += `// ${ product_name }
${JSON.stringify(archived, false, 3)}
                `;
            }
        }else {
            logText += `// ${ product_name } not exist
            `;
        }        
    }

    services.logs.write( 'set_orders_cancelled', logText );
    res.json( {ok:'ok'} );
}